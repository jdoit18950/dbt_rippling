version: 2

metrics:
  - name: total_headcount
    label: Total Headcount
    model: ref('hr_metrics_combined')
    type: count_distinct
    description: "Total number of employees"
    sql: worker_id
    meta:
      dimension:
        - department_name
        - department_path

  - name: average_salary
    label: Average Salary
    model: ref('hr_metrics_combined')
    type: average
    description: "Average annual salary"
    sql: calculated_annual_salary
    meta:
      dimension:
        - department_name
        - job_title

  - name: turnover_rate
    label: Turnover Rate
    model: ref('hr_metrics_combined')
    type: expression
    description: "Employee turnover rate as a percentage"
    sql: "100.0 * terminations / NULLIF(total_employees, 0)"
    meta:
      dimension:
        - department_name

  - name: total_personnel_cost
    label: Total Personnel Cost
    model: ref('hr_metrics_combined')
    type: sum
    description: "Total monthly personnel cost including salary, benefits, and overtime"
    sql: total_monthly_cost
    meta:
      dimension:
        - department_name